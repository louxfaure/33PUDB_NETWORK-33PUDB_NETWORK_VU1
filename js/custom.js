!function n(a,s,c){function l(r,e){if(!s[r]){if(!a[r]){var i="function"==typeof require&&require;if(!e&&i)return i(r,!0);if(d)return d(r,!0);var t=new Error("Cannot find module '"+r+"'");throw t.code="MODULE_NOT_FOUND",t}var o=s[r]={exports:{}};a[r][0].call(o.exports,function(e){return l(a[r][1][e]||e)},o,o.exports,n,a,s,c)}return s[r].exports}for(var d="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,r,i){"use strict";e("./prmSearchBarAfter/prmSearchBarAfter");var t=e("./prmTopbarAfter/prmTopBarAfter"),o=angular.module("viewCustom",["angularLoad"]);console.log("Début de la personnalisation angular"),console.log("Modules AngularJS chargés : angularLoad"),o&&o.component("prmTopbarAfter",t.prmTopbarAfterConfig)},{"./prmSearchBarAfter/prmSearchBarAfter":2,"./prmTopbarAfter/prmTopBarAfter":3}],2:[function(e,r,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var t=function(){function t(e,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();var o=function(){function i(e,r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,i),this.$onInit=function(){this.$window=r,console.log("33PUDB : PrmSearchAfterController constructor called"),console.log(this),this.parentCtrl.configurationUtil.discoveryLocalNoLogin=!0,console.log("Affiche le Message de redirection (showRedirectionMessage)",this.showRedirectionMessage),console.log("Choix de l'utilisateur (viewRedirectionMessage):",this.viewRedirectionMessage),"true"!==this.parentCtrl.jwtUtilService.storageUtil.localStorage.getItem("viewRedirectionMessage")&&void 0===this.parentCtrl.jwtUtilService.storageUtil.localStorage.getItem("viewRedirectionMessage")||(this.detectLanguage(),this.redirectLinks=[{domain:"pudb-bxsa.primo.exlibrisgroup.com",vid:"BXSA",name:"Bordeaux Sciences Agro",ariaLabel:"Vous serez redirigé vers le catalogue Babord+ de Bordeaux Sciences Agro"},{domain:"pudb-iep.primo.exlibrisgroup.com",vid:"IEP",name:"Sciences Po Bordeaux",ariaLabel:"Vous serez redirigé vers le catalogue Babord+ de Sciences Po Bordeaux"},{domain:"pudb-inp.primo.exlibrisgroup.com",vid:"INP",name:"INP Bordeaux",ariaLabel:"Vous serez redirigé vers le catalogue Babord+ de INP Bordeaux"},{domain:"pudb-ub.primo.exlibrisgroup.com",vid:"UB",name:"Université de Bordeaux",ariaLabel:"Vous serez redirigé vers le catalogue Babord+ de Université de Bordeaux"},{domain:"pudb-ubm.primo.exlibrisgroup.com",vid:"UBM",name:"Université Bordeaux Montaigne",ariaLabel:"Vous serez redirigé vers le catalogue Babord+ de Université Bordeaux Montaigne"}],this.showRedirectionMessage=!0,this.parentCtrl.jwtUtilService.storageUtil.localStorage.setItem("viewRedirectionMessage","true")),e.queryTerm=encodeURIComponent(this.parentCtrl.searchService.searchFieldsService._mainSearch)}}return t(i,[{key:"detectLanguage",value:function(){switch(new URLSearchParams(this.$window.location.search).get("lang")||"fr"){case"en":this.titleText="You're not in the right place?",this.contentText="To improve your search experience, Bordeaux university libraries have updated their search portal. To access your institution's catalog, please click on the link below. You will be redirected to your institution's new portal.",this.footerText="Once redirected, we recommend updating your bookmarks with the new Babord+ catalog URL.";break;case"es":this.titleText="¿No estás en el lugar correcto?",this.contentText="Para mejorar su experiencia de búsqueda, las bibliotecas universitarias de Burdeos han actualizado su portal de búsqueda. Para acceder al catálogo de su institución, haga clic en el enlace a continuación. Será redirigido al nuevo portal de su institución.",this.footerText="Una vez redirigido, le recomendamos que actualice sus marcadores con la nueva URL del catálogo Babord+.";break;default:this.titleText="Vous n'êtes pas au bon endroit ?",this.contentText="Pour améliorer votre expérience de recherche, les bibliothèques universitaires bordelaises ont mis à jour leur portail de recherche. Pour accéder au catalogue de votre institution, veuillez cliquer sur le lien ci-dessous. Vous serez redirigé vers le nouveau portail de votre établissement.",this.footerText="Une fois redirigé, nous vous conseillons de mettre à jour vos favoris avec la nouvelle URL du catalogue Babord+."}}},{key:"updateRedirectUrl",value:function(e,r){var i=this.$window.location.href.replace(this.$window.location.origin,"https://"+e).replace(/vid=[^&]+/,"vid=33PUDB_"+r+":33PUDB_"+r+"_VU1");console.log("URL mise à jour : "+i),this.$window.location.href=i}},{key:"externalSearchMsgOnClick",value:function(){this.showRedirectionMessage=!1,this.parentCtrl.jwtUtilService.storageUtil.localStorage.setItem("viewRedirectionMessage","false")}}]),i}();o.$inject=["$scope","$window"];i.prmSearchBarAfterConfig={bindings:{parentCtrl:"<"},controller:o,template:'<div id="redirectionMessage" ng-show="$ctrl.showRedirectionMessage && !$ctrl.parentCtrl.searchInProgress">\n    <md-card class="default-card _md md-primoExplore-theme">\n      <md-card-title>\n        <md-card-title-text>\n            <span class="md-headline">{{ $ctrl.titleText }}</span>\n        </md-card-title-text>\n      </md-card-title>\n      \n      <md-card-content>\n        <p>{{ $ctrl.contentText }}</p>\n        <p>{{ $ctrl.footerText }}</p>\n        <div layout="row" layout-wrap layout-align="space-around center" class="layout-row redirectionButtonsRow">\n          <md-button\n          id="{{link.vid }}-redirect-button"\n            class="md-raised md-primary" \n            ng-repeat="link in $ctrl.redirectLinks" \n            ng-click="$ctrl.updateRedirectUrl(link.domain,link.vid)">\n            {{link.name}}\n            <md-tooltip>\n              {{link.ariaLabel}}\n            </md-tooltip>\n          </md-button>\n        </div>\n      </md-card-content>\n  \n      <button class="dismiss-alert-button zero-margin md-button md-primoExplore-theme md-ink-ripple button-with-icon" ng-click="$ctrl.externalSearchMsgOnClick()">\n        <prm-icon icon-type="svg" svg-icon-set="navigation" icon-definition="ic_close_24px">\n          <md-icon md-svg-icon="navigation:ic_close_24px" alt="" class="md-primoExplore-theme" aria-hidden="true"></md-icon>\n        </prm-icon>\n        NE PLUS AFFICHER CE MESSAGE\n      </button>\n    </md-card>\n  </div>'}},{}],3:[function(e,r,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var t=function(){function t(e,r){for(var i=0;i<r.length;i++){var t=r[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();var o=function(){function i(e,r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,i),this.$onInit=function(){this.$window=r,console.log("33PUDB : prmTopbarAfterController constructor called"),console.log(this),console.log("Affiche le Message de redirection (showRedirectionMessage)",this.showRedirectionMessage),console.log("Choix de l'utilisateur (viewRedirectionMessage):",this.viewRedirectionMessage),this.parentCtrl.configurationUtil.discoveryLocalNoLogin=!0,this.detectLanguage(),this.redirectLinks=[{domain:"pudb-bxsa.primo.exlibrisgroup.com",vid:"BXSA",name:"Bordeaux Sciences Agro",ariaLabel:"Vous serez redirigé vers le catalogue Babord+ de Bordeaux Sciences Agro"},{domain:"pudb-iep.primo.exlibrisgroup.com",vid:"IEP",name:"Sciences Po Bordeaux",ariaLabel:"Vous serez redirigé vers le catalogue Babord+ de Sciences Po Bordeaux"},{domain:"pudb-inp.primo.exlibrisgroup.com",vid:"INP",name:"INP Bordeaux",ariaLabel:"Vous serez redirigé vers le catalogue Babord+ de INP Bordeaux"},{domain:"pudb-ub.primo.exlibrisgroup.com",vid:"UB",name:"Université de Bordeaux",ariaLabel:"Vous serez redirigé vers le catalogue Babord+ de Université de Bordeaux"},{domain:"pudb-ubm.primo.exlibrisgroup.com",vid:"UBM",name:"Université Bordeaux Montaigne",ariaLabel:"Vous serez redirigé vers le catalogue Babord+ de Université Bordeaux Montaigne"}],this.showRedirectionMessage=!0}}return t(i,[{key:"detectLanguage",value:function(){switch(new URLSearchParams(this.$window.location.search).get("lang")||"fr"){case"en":this.titleText="You're not in the right place?",this.contentText="To improve your search experience, Bordeaux university libraries have updated their search portal. To access your institution's catalog, please click on the link below. You will be redirected to your institution's new portal.",this.footerText="Once redirected, we recommend updating your bookmarks with the new Babord+ catalog URL.";break;case"es":this.titleText="¿No estás en el lugar correcto?",this.contentText="Para mejorar su experiencia de búsqueda, las bibliotecas universitarias de Burdeos han actualizado su portal de búsqueda. Para acceder al catálogo de su institución, haga clic en el enlace a continuación. Será redirigido al nuevo portal de su institución.",this.footerText="Una vez redirigido, le recomendamos que actualice sus marcadores con la nueva URL del catálogo Babord+.";break;default:this.titleText="Vous n'êtes pas au bon endroit ?",this.contentText="Pour améliorer votre expérience de recherche, les bibliothèques universitaires bordelaises ont mis à jour leur portail de recherche. Pour accéder au catalogue de votre institution, veuillez cliquer sur le lien ci-dessous. Vous serez redirigé vers le nouveau portail de votre établissement.",this.footerText="Une fois redirigé, nous vous conseillons de mettre à jour vos favoris avec la nouvelle URL du catalogue Babord+."}}},{key:"updateRedirectUrl",value:function(e,r){var i=this.$window.location.href.replace(this.$window.location.origin,"https://"+e).replace(/vid=[^&]+/,"vid=33PUDB_"+r+":33PUDB_"+r+"_VU1");console.log("URL mise à jour : "+i),this.$window.location.href=i}},{key:"externalSearchMsgOnClick",value:function(){this.showRedirectionMessage=!1}}]),i}();o.$inject=["$scope","$window"];i.prmTopbarAfterConfig={bindings:{parentCtrl:"<"},controller:o,template:'<div class="redirection-container">\n  <div id="redirectionMessage" class="layout-column" layout="column"\n    ng-show="$ctrl.showRedirectionMessage && !$ctrl.parentCtrl.searchInProgress">\n    \x3c!-- Icône de fermeture --\x3e\n    <button class="close-icon-button" ng-click="$ctrl.externalSearchMsgOnClick()">\n      <prm-icon icon-type="svg" svg-icon-set="navigation" icon-definition="ic_close_24px">\n        <md-icon md-svg-icon="navigation:ic_close_24px" alt="Ne plus afficher ce message" class="md-primoExplore-theme" md-tooltip="Ne plus afficher ce message"\n          aria-label="Ne plus afficher ce message"></md-icon>\n      </prm-icon>\n    </button>\n\n    <md-card class="default-card _md md-primoExplore-theme">\n      <md-card-title>\n        <md-card-title-text>\n          <span class="md-headline">{{ $ctrl.titleText }}</span>\n        </md-card-title-text>\n      </md-card-title>\n\n      <md-card-content>\n        <p>{{ $ctrl.contentText }}</p>\n        <p>{{ $ctrl.footerText }}</p>\n        <div layout="row" layout-wrap layout-align="space-around center" class="layout-row redirectionButtonsRow">\n          <md-button id="{{link.vid }}-redirect-button" class="md-raised md-primary"\n            ng-repeat="link in $ctrl.redirectLinks" ng-click="$ctrl.updateRedirectUrl(link.domain,link.vid)">\n            {{link.name}}\n            <md-tooltip>\n              {{link.ariaLabel}}\n            </md-tooltip>\n          </md-button>\n        </div>\n      </md-card-content>\n    </md-card>\n  </div>\n</div>'}},{}]},{},[1]);
//# sourceMappingURL=custom.js.map
