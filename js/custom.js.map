{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/33PUDB_NETWORK-33PUDB_NETWORK_VU1/js/main.js","primo-explore/custom/33PUDB_NETWORK-33PUDB_NETWORK_VU1/js/prmSearchBarAfter/prmSearchBarAfter.js","primo-explore/custom/33PUDB_NETWORK-33PUDB_NETWORK_VU1/js/prmTopbarAfter/prmTopBarAfter.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","_prmTopBarAfter","app","angular","console","log","component","prmTopbarAfterConfig","PrmSearchBarAfterController","$scope","$window","_classCallCheck","this","$onInit","parentCtrl","configurationUtil","discoveryLocalNoLogin","showRedirectionMessage","viewRedirectionMessage","jwtUtilService","storageUtil","localStorage","getItem","undefined","detectLanguage","redirectLinks","domain","vid","name","ariaLabel","setItem","queryTerm","encodeURIComponent","searchService","searchFieldsService","_mainSearch","URLSearchParams","location","search","get","titleText","contentText","footerText","url","href","replace","origin","$inject","prmSearchBarAfterConfig","bindings","controller","template","prmTopbarAfterController","defurl"],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import { prmSearchBarAfterConfig } from './prmSearchBarAfter/prmSearchBarAfter';\nimport { prmTopbarAfterConfig } from './prmTopbarAfter/prmTopBarAfter';\n\nlet app = angular.module('viewCustom',['angularLoad']);\nconsole.log(\"Début de la personnalisation angular\");\nconsole.log(\"Modules AngularJS chargés : angularLoad\");\nif (app){\n    // app.component('prmSearchBarAfter', prmSearchBarAfterConfig);\n    app.component('prmTopbarAfter', prmTopbarAfterConfig);\n}\n","import redirectionMessageTemplate from './redirectionMessage.html'\n\nclass PrmSearchBarAfterController {\n    constructor($scope, $window){\n      this.$onInit = function () {\n        this.$window = $window;\n        console.log('33PUDB : PrmSearchAfterController constructor called');\n        console.log(this);\n        // Désactive la possibilité de s'authentifier et les messages d'authentification depuis la vue réseau\n        this.parentCtrl.configurationUtil.discoveryLocalNoLogin = true; \n        console.log('Affiche le Message de redirection (showRedirectionMessage)',this.showRedirectionMessage)\n        console.log(\"Choix de l'utilisateur (viewRedirectionMessage):\",this.viewRedirectionMessage)\n      if (this.parentCtrl.jwtUtilService.storageUtil.localStorage.getItem('viewRedirectionMessage') === 'true' || this.parentCtrl.jwtUtilService.storageUtil.localStorage.getItem('viewRedirectionMessage') !== undefined) {\n        this.detectLanguage(); // Détecte la langue au chargement\n        this.redirectLinks = [\n          { domain: 'pudb-bxsa.primo.exlibrisgroup.com',vid:'BXSA',  name: 'Bordeaux Sciences Agro', ariaLabel:'Vous serez redirigé vers le catalogue Babord+ de Bordeaux Sciences Agro' },\n          { domain: 'pudb-iep.primo.exlibrisgroup.com',vid:'IEP',  name: 'Sciences Po Bordeaux', ariaLabel:'Vous serez redirigé vers le catalogue Babord+ de Sciences Po Bordeaux' },\n          { domain: 'pudb-inp.primo.exlibrisgroup.com',vid:'INP',  name: 'INP Bordeaux', ariaLabel:'Vous serez redirigé vers le catalogue Babord+ de INP Bordeaux' },\n          { domain: 'pudb-ub.primo.exlibrisgroup.com',vid:'UB',  name: 'Université de Bordeaux', ariaLabel:'Vous serez redirigé vers le catalogue Babord+ de Université de Bordeaux' },\n          { domain: 'pudb-ubm.primo.exlibrisgroup.com',vid:'UBM',  name: 'Université Bordeaux Montaigne', ariaLabel:'Vous serez redirigé vers le catalogue Babord+ de Université Bordeaux Montaigne' }\n        ];\n        this.showRedirectionMessage = true;\n        this.parentCtrl.jwtUtilService.storageUtil.localStorage.setItem('viewRedirectionMessage', 'true');\n        }\n       \n        $scope.queryTerm = encodeURIComponent(this.parentCtrl.searchService.searchFieldsService._mainSearch);\n      }\n    }\n\n      // Méthode pour détecter la langue et définir le texte\n  detectLanguage() {\n    const urlParams = new URLSearchParams(this.$window.location.search);\n    const lang = urlParams.get('lang') || 'fr'; // Définit 'fr' par défaut si lang est null\n\n    // Définit les textes en fonction de la langue\n    switch (lang) {\n      case 'en':\n        this.titleText = \"You're not in the right place?\";\n        this.contentText = \"To improve your search experience, Bordeaux university libraries have updated their search portal. To access your institution's catalog, please click on the link below. You will be redirected to your institution's new portal.\";\n        this.footerText = \"Once redirected, we recommend updating your bookmarks with the new Babord+ catalog URL.\";\n        break;\n      case 'es':\n        this.titleText = \"¿No estás en el lugar correcto?\";\n        this.contentText = \"Para mejorar su experiencia de búsqueda, las bibliotecas universitarias de Burdeos han actualizado su portal de búsqueda. Para acceder al catálogo de su institución, haga clic en el enlace a continuación. Será redirigido al nuevo portal de su institución.\";\n        this.footerText = \"Una vez redirigido, le recomendamos que actualice sus marcadores con la nueva URL del catálogo Babord+.\";\n        break;\n      default:\n        this.titleText = \"Vous n'êtes pas au bon endroit ?\";\n        this.contentText = \"Pour améliorer votre expérience de recherche, les bibliothèques universitaires bordelaises ont mis à jour leur portail de recherche. Pour accéder au catalogue de votre institution, veuillez cliquer sur le lien ci-dessous. Vous serez redirigé vers le nouveau portail de votre établissement.\";\n        this.footerText = \"Une fois redirigé, nous vous conseillons de mettre à jour vos favoris avec la nouvelle URL du catalogue Babord+.\";\n        break;\n    }\n  }\n\n    // Méthode pour mettre à jour l'URL de redirection dynamiquement\n    updateRedirectUrl(domain,vid) {\n      const currentUrl = this.$window.location.href; // Récupère l'URL actuelle\n      const newUrl = currentUrl.replace(this.$window.location.origin, `https://${domain}`);\n      const url = newUrl.replace(/vid=[^&]+/, `vid=33PUDB_${vid}:33PUDB_${vid}_VU1`);\n      console.log(`URL mise à jour : ${url}`);\n      this.$window.location.href = url; // Redirige vers la nouvelle URL\n    }\n\n    externalSearchMsgOnClick (){\n      this.showRedirectionMessage = false;\n      this.parentCtrl.jwtUtilService.storageUtil.localStorage.setItem('viewRedirectionMessage','false');\n    };\n  }\n\n  PrmSearchBarAfterController.$inject = ['$scope', '$window']\n  export let prmSearchBarAfterConfig = {\n    bindings: {parentCtrl:'<'},\n    controller: PrmSearchBarAfterController,\n    template:  redirectionMessageTemplate,\n  }","import redirectionMessageTemplate from './redirectionMessage.html'\n\nclass prmTopbarAfterController {\n    constructor($scope, $window){\n      this.$onInit = function () {\n        this.$window = $window;\n        console.log('33PUDB : prmTopbarAfterController constructor called');\n        console.log(this);\n        console.log('Affiche le Message de redirection (showRedirectionMessage)',this.showRedirectionMessage)\n        console.log(\"Choix de l'utilisateur (viewRedirectionMessage):\",this.viewRedirectionMessage)\n        // Désactive la possibilité de s'authentifier et les messages d'authentification depuis la vue réseau\n        this.parentCtrl.configurationUtil.discoveryLocalNoLogin = true;\n        this.detectLanguage(); // Détecte la langue au chargement\n        this.redirectLinks = [\n          { domain: 'pudb-bxsa.primo.exlibrisgroup.com',vid:'BXSA',  name: 'Bordeaux Sciences Agro', ariaLabel:'Vous serez redirigé vers le catalogue Babord+ de Bordeaux Sciences Agro' },\n          { domain: 'pudb-iep.primo.exlibrisgroup.com',vid:'IEP',  name: 'Sciences Po Bordeaux', ariaLabel:'Vous serez redirigé vers le catalogue Babord+ de Sciences Po Bordeaux' },\n          { domain: 'pudb-inp.primo.exlibrisgroup.com',vid:'INP',  name: 'INP Bordeaux', ariaLabel:'Vous serez redirigé vers le catalogue Babord+ de INP Bordeaux' },\n          { domain: 'pudb-ub.primo.exlibrisgroup.com',vid:'UB',  name: 'Université de Bordeaux', ariaLabel:'Vous serez redirigé vers le catalogue Babord+ de Université de Bordeaux' },\n          { domain: 'pudb-ubm.primo.exlibrisgroup.com',vid:'UBM',  name: 'Université Bordeaux Montaigne', ariaLabel:'Vous serez redirigé vers le catalogue Babord+ de Université Bordeaux Montaigne' }\n        ];\n        this.showRedirectionMessage = true;\n        }\n       \n\n    }\n\n      // Méthode pour détecter la langue et définir le texte\n  detectLanguage() {\n    const urlParams = new URLSearchParams(this.$window.location.search);\n    const lang = urlParams.get('lang') || 'fr'; // Définit 'fr' par défaut si lang est null\n\n    // Définit les textes en fonction de la langue\n    switch (lang) {\n      case 'en':\n        this.titleText = \"You're not in the right place?\";\n        this.contentText = \"To improve your search experience, Bordeaux university libraries have updated their search portal. To access your institution's catalog, please click on the link below. You will be redirected to your institution's new portal.\";\n        this.footerText = \"Once redirected, we recommend updating your bookmarks with the new Babord+ catalog URL.\";\n        break;\n      case 'es':\n        this.titleText = \"¿No estás en el lugar correcto?\";\n        this.contentText = \"Para mejorar su experiencia de búsqueda, las bibliotecas universitarias de Burdeos han actualizado su portal de búsqueda. Para acceder al catálogo de su institución, haga clic en el enlace a continuación. Será redirigido al nuevo portal de su institución.\";\n        this.footerText = \"Una vez redirigido, le recomendamos que actualice sus marcadores con la nueva URL del catálogo Babord+.\";\n        break;\n      default:\n        this.titleText = \"Vous n'êtes pas au bon endroit ?\";\n        this.contentText = \"Pour améliorer votre expérience de recherche, les bibliothèques universitaires bordelaises ont mis à jour leur portail de recherche. Pour accéder au catalogue de votre institution, veuillez cliquer sur le lien ci-dessous. Vous serez redirigé vers le nouveau portail de votre établissement.\";\n        this.footerText = \"Une fois redirigé, nous vous conseillons de mettre à jour vos favoris avec la nouvelle URL du catalogue Babord+.\";\n        break;\n    }\n  }\n\n    // Méthode pour mettre à jour l'URL de redirection dynamiquement\n    updateRedirectUrl(domain,vid) {\n      const currentUrl = this.$window.location.href; // Récupère l'URL actuelle\n      const newUrl = currentUrl.replace(this.$window.location.origin, `https://${domain}`);\n      const url = newUrl.replace(/vid=[^&]+/, `vid=33PUDB_${vid}:33PUDB_${vid}_VU1`);\n      const defurl = url.replace(/institution=[^&]+/, `institution=33PUDB_${vid}`);\n      console.log(`URL mise à jour : ${defurl}`);\n      this.$window.location.href = defurl; // Redirige vers la nouvelle URL\n    }\n\n    externalSearchMsgOnClick (){\n      this.showRedirectionMessage = false;\n    };\n  }\n\n  prmTopbarAfterController.$inject = ['$scope', '$window']\n  export let prmTopbarAfterConfig = {\n    bindings: {parentCtrl:'<'},\n    controller: prmTopbarAfterController,\n    template:  redirectionMessageTemplate,\n  }"],"sourceRoot":"/source/"}